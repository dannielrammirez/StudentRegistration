<mat-card class="form-card">
  <mat-card-title>Formulario de Inscripción de Materias</mat-card-title>
  <mat-card-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <div class="course-selection" formGroupName="selectedCourses" *ngIf="allCourses.length > 0">
        <label class="course-section-label">Selecciona tus Materias (Máximo 3):</label>
        <div class="course-list">
            <mat-checkbox
              *ngFor="let course of allCourses"
              [formControlName]="course.id"
              class="course-item">
              {{ course.name }} <span class="professor-name">(Profesor: {{ course.professor.fullName }})</span>
            </mat-checkbox>
        </div>
      </div>

      <div class="summary">
        <p>Materias seleccionadas: {{ selectedCoursesCount }} / 3</p>
        <div *ngIf="validationError" class="error-message">
          {{ validationError }}
        </div>
      </div>

      <div class="btn-wrapper">
        <button mat-raised-button color="primary" type="submit" [disabled]="!!validationError || isLoading || selectedCoursesCount === 0">
          <span *ngIf="!isLoading">Inscribir Materias</span>
          <mat-progress-spinner *ngIf="isLoading" mode="indeterminate" diameter="24"></mat-progress-spinner>
        </button>
      </div>

    </form>
  </mat-card-content>
</mat-card>